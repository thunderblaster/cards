<!DOCTYPE html>
<html>

<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-163364396-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-163364396-1');
	</script>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<link href="/css/all.min.css" rel="stylesheet">
	<link href="/css/styles.css" rel="stylesheet">
	<title>Cards</title>
</head>

<body>
	<div id="app">
		<div v-if="!roomjoined">
			<!-- this is the join a room view -->
			<h1>Bigger, Blacker Card Game</h1>
			<h3><i>(a totally unique idea)</i></h3>
			What's your name?<input v-model="name" class="lobbyinput"><br>
			Enter a room name to join:<input v-model="room" v-on:keyup.enter="joinroom" class="lobbyinput"><button @click="joinroom"><i
					class="fas fa-arrow-right"></i></button>
			<h3>Tips:</h3>
			<ul>
				<li>The white cards are scrollable. On desktop, you mean need to click in between cards and then use
					your mouse wheel.</li>
				<li>On mobile, switching to another app and then back to your browser sometimes reloads the page. Sign
					in to the same room with your same name to retain your score!</li>
				<li>If the game isn't responding, try refreshing the page and starting again.</li>
				<li>Issues or feature requests can be submitted to <a href='https://github.com/thunderblaster/cards/issues'>GitHub</a></li>
			</ul>
			<div class="version">
				<p>Current Commit: {{version.hash}}<br>Commit Date: {{version.date}}</p>
			</div>
		</div>
		<div v-if="roomjoined">
			<!-- this is the playing cards view -->
			<div id="chatlink" v-if="chatlink.visible">
				<div>Link To This Room's Chat:</div>
				<div id="chatlinkgroup" v-if="chatlink.current"><a v-bind:href="chatlink.current"
						target="_blank">{{chatlink.current}}</a><button @click="editchatlink"><i
							class="fas fa-pencil-alt"></i></button></div>
				<div id="chatlinkinputgroup" v-if="!chatlink.current"><input v-model="chatlink.temp"
						v-on:keyup.enter="submitchatlink" placeholder="https://hangouts.google.com/xxxxxxxx" class="chatlinkinput"><button
						@click="submitchatlink"><i class="fas fa-check"></i></button><button @click="cancelchatlink"><i
							class="fas fa-times"></i></button></div>
					<i class="fas fa-chevron-up fa-2x hide-chat" @click="chatlink.visible=false"></i>
			</div>
			<div id="chatlinkdropdown" v-if="!chatlink.visible">
				<i class="fas fa-headset fa-2x hide-chat" @click="chatlink.visible=true"></i>
			</div>
			<div id="playerlist">
				<ul>
					<li><u>{{room}}:</u></li>
					<li v-for="player in players" :key="player.name"
						:class="{ selected: player.selected, turn: player.turn}">{{player.name}} - {{player.points}}
					</li>
				</ul>
			</div>
			<div id="mycards">
				<ul v-if="!turn&&!selectedcards.length">
					<li v-for="(card, index) in whitecards" class="card whitecard" @click="selectCard(index)"
						:class="{ selected: card.selected }" :key="card.card_id">
						<p v-html="card.card_text"></p>
					</li>
				</ul>
				<ul v-if="selectedcards.length&&turn">
					<li v-for="(card, index) in selectedcards" class="card whitecard" @click="selectWinningCard(index)"
						:class="{ selected: card.selected }" :key="card.name">
						<p v-html="card.card_text"></p>
						<p v-if="!turn" class="whitecardname">{{card.name}}</p>
					</li>
				</ul>
				<ul v-if="selectedcards.length&&!turn">
					<li v-for="(card, index) in selectedcards" class="card whitecard"
						:class="{ selected: card.selected }" :key="card.name">
						<p v-html="card.card_text"></p>
						<p class="whitecardname">{{card.name}}</p>
					</li>
				</ul>
				<h2 v-if="turn&&!selectedcards.length" class="turntext">It's your turn! Wait for other players to select
					white cards for you to choose from.</h2>
			</div>
			<div id="blackcard" v-if="blackcard.length" class="card blackcard">
				<p v-html="blackcard[0].card_text"></p>
			</div>
			<button @click="startgame" v-if="!gamestarted" id="startbutton">Start Game!</button>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<script src="/socket.io/socket.io.js"></script>

	<script src="/js/app.js"></script>
</body>
<script>
	var socket;
</script>

</html>